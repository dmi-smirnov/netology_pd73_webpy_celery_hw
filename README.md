# netology_pd73_webpy_celery_hw

## Подготовка файла с переменными окружения
В директории проекта создать файл `.env` со следующими переменными окружения:
```
APP_NAME=netology_pd73_webpy_celery_hw
NGINX_HOST_ADDR_PORT=127.0.0.1:80
HTTP_SRV_URL=http://127.0.0.1/
```
`APP_NAME=netology_pd73_webpy_celery_hw` имя приложения для Flask и Celery

`NGINX_HOST_ADDR_PORT=127.0.0.1:80` адрес и порт, по которым будет доступен веб-сервер на хосте

`HTTP_SRV_URL=http://127.0.0.1/` URL веб-сервера, который будет подставляться в ссылку на выходной файл в результат задачи

## Запуск контейнеров для приложения
Из директории проекта выполнить:
```bash
sudo docker compose up -d
```

## Тестирование приложения

### Создание виртуального окружения Python для тестирования
Из директории проекта выполнить:
```bash
python3 -m venv venv
```

### Вход в созданое виртуальное окружение Python
Из директории проекта выполнить:
```bash
source venv/bin/activate
```

### Установка пакетов Python в созданное виртуальное окружение Python
Из виртуального окружения Python в директории проекта выполнить:
```bash
pip install -r requirements-dev.txt
```

### Запуск контейнеров для тестирования приложения
Из директории проекта выполнить:
```bash
sudo docker compose --env-file tests/.env up -d
```

### Запуск тестов
Из виртуального окружения Python в директории проекта выполнить:
```bash
pytest
```

### Остановка и удаление контейнеров, запущенных для тестирования приложения
```bash
sudo docker compose down
```